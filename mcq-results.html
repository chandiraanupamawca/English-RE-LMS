<!DOCTYPE html>
<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>MCQ Results - English RE</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/img/favicon/icon.png" />
    <script src="js/pdf.js"></script>
    <script src="js/jspdf.plugin.autotable.js"></script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
  
<script src="js/sweetalert2@11.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>
<script src="js/config.js"></script>
    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="assets/vendor/fonts/boxicons.css" />
<script src="js/moment.min.js"></script>
    <!-- Core CSS -->
    <link rel="stylesheet" href="assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <link rel="stylesheet" href="assets/vendor/libs/apex-charts/apex-charts.css" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="assets/js/config.js"></script>

  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="container-xxl flex-grow-1 container-p-y" id="cont" >
      <div class="row">
        <div class="col-xl">
          <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h4 class="card-header text-primary fw-bold"><span id="mname">MCQ Name</span> | <span id="cname">Class Name</span></h4>

              <div class="text-muted float-end">
                
                <span class="badge bg-warning">Total Marks: <span  id="fullt">00%</span></span>
              </div>
             
            </div>
            
            <div class="card-body">
              <iframe id="mcqpdf" height="500vh" width="100%"></iframe>
              <button type="button" id="dld" class="btn btn-primary btn-sm mt-2" >Download Paper Here</button>
            </div>
          </div>
        </div>
        <div class="col-xl">
          <div class="card mb-4">
            <div class="card-body">
              <h5 class="mb-0">Submission Info</h5>
<br>
              <p>
                <span class="text-primary fw-bold">Student ID : </span>   <span id="sidd">Loading </span><br>
                <span class="text-primary fw-bold">Student Name : </span>   <span id="stname">Loading </span><br>
                <span class="text-primary fw-bold">Started Writing at : </span>   <span id="startt">Loading </span><br>
                <span class="text-primary fw-bold">Submitted at : </span>   <span id="endd" >Loading </span><br>
                <span class="text-primary fw-bold">Window Focus : </span>   <span  id="focuss"><span class="badge bg-label-success rounded-pill">GOOD</span> </span><br>
                <span class="text-primary fw-bold">OS : </span>   <span id="oss">Loading </span><br>

              </p>

            </div>
          </div>
          <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h5 class="mb-0">Results Sheet</h5>
              <small class="text-muted float-end">Review Your Answers here!</small>
            </div>
            <div class="card-body" >
              <div>
                <table class="table" id="ress">
                  <tbody>
                    <tr>
                      <th>Question Number</th>
                      <th>Validation</th>
                    </tr>
                  </tbody>
                </table>
               </div>
              <button type="button" class="btn btn-primary btn-sm mt-2" onclick="dl()">Download Results</button>
 
            </div>
            
          </div>
        </div>
      </div>

      <div id="review" style="width:300px ; display: none;">
        <div class="card">
          <div class="card-body">
            <h4 class="card-header">Review Answers</h4>
            <table class="table" id="rbb">
              <tbody>
                <tr >
                  <th class="text-primary fw-bold">Question Number</th>
                  <th class="text-primary fw-bold">Answer</th>
                </tr>
                <td>Q0</td>
                <td>0</td>
                </td>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="assets/vendor/libs/jquery/jquery.js"></script>
    <script src="assets/vendor/libs/popper/popper.js"></script>
    <script src="assets/vendor/js/bootstrap.js"></script>
    <script src="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="assets/vendor/js/menu.js"></script>
    <!-- endbuild -->
    <!-- Vendors JS -->

    <!-- Main JS -->
    <script src="assets/js/main.js"></script>
    <!-- Page JS -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </body>
  <script>
var $$ = function( id ) { return document.getElementById( id ); };

    function downloadFile(url, fileName) {
  fetch(url, { method: 'get', mode: 'no-cors', referrerPolicy: 'no-referrer' })
    .then(res => res.blob())
    .then(res => {
      const aElement = document.createElement('a');
      aElement.setAttribute('download', fileName);
      const href = URL.createObjectURL(res);
      aElement.href = href;
      aElement.setAttribute('target', '_blank');
      aElement.click();
      URL.revokeObjectURL(href);
    });

    Swal.fire({
      position: 'top-end',
      icon: 'success',
      title: 'Your file has been downloaded successfully',
      showConfirmButton: false,
      timer: 1500
    })
};

function download_file (urlz,namez){
  const url =urlz

const options = {

};
fetch(url, options)
.then( res => res.blob() )
.then( blob => {
downfile = window.URL.createObjectURL(blob);
downloadFile(downfile,namez)
});
}
document.getElementById('dld').onclick = function (){
  Swal.fire({
        title: 'Downloading the file!',
        html: 'Please wait..It may take a few seconds',
        timerProgressBar: true,
  showCloseButton:true
  
      })
    download_file( document.getElementById('mcqpdf').src,document.getElementById('cname').innerText+" | Exam_"+document.getElementById('mname').innerText+".pdf")
  }
  function dl (){

var doc = new jsPDF()

var pageSize = doc.internal.pageSize;
var pageHeight = pageSize.height
var pageWidth = pageSize.width
var myImage = new Image();
myImage .src = 'assets/img/icons/English-RE-Logo.png';
myImage .onload = function(){
doc.addImage(myImage, 'png', 120,8, 75, 30)
doc.setFontSize(20);

doc.setTextColor(38, 70, 83);
doc.setFont("arial","bold")
doc.text("EXAM RESULTS" , 13, 19);
doc.text("__________________"  , 13, 21);
doc.setFont("arial","normal")
doc.setTextColor(40);
var jh =  $$("startt").innerText
doc.setFontSize(10);
doc.text("Exam Topic :"+ $$('mname').innerText  , 13, 28);
doc.text("Student ID :"+ $$('sidd').innerText  , 13, 33);
doc.text("Student Name :"+ $$('stname').innerText  , 13, 38);

doc.text("Writing Started at :"+ jh  , 13,43 );
doc.text("Writing Ended at :"+ $$("endd").innerText  , 13,48 );
doc.text("Focus Level :"+ $$("focuss").innerText  , 13,53 );
doc.text("Device :"+ $$("oss").innerText  , 13,58 );
doc.setTextColor(255, 0, 0);
doc.text("Marks :"+ $$("fullt").innerText  , 13, 63);

doc.setTextColor(40);
doc.autoTable({ html: '#ress', startY:70 })
doc.autoTable({
  startY: doc.autoTable() + 70,

  margin: { horizontal: 10 },
  styles: { overflow: "linebreak" },
  bodyStyles: { valign: "top" },
  columnStyles: { email: { cellWidth: "wrap" } },
  theme: "striped",
  showHead: "everyPage",
  didDrawPage: function (data) {

    // Header
    
    // Footer
    var str = "Page " + doc.internal.getNumberOfPages();

    doc.setFontSize(10);

    // jsPDF 1.4+ uses getWidth, <1.4 uses .width
    var pageSize = doc.internal.pageSize;
    var pageHeight = pageSize.height
      ? pageSize.height
      : pageSize.getHeight();
    doc.text(str, data.settings.margin.left, pageHeight - 10);
  }
});

doc.save($$('mname').innerText+' | Student_ID_'+$$('sidd').innerText +'_Resul_ Sheet'+'.pdf')

}}
  </script>
  <div class="buy-now">
    <a class="btn btn-danger btn-buy-now" id="hell" style="color:#ffff ;">Buy Now</a>
  </div>
</html>
